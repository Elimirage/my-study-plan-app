# competencies.py

"""
Матрица соответствия: профиль → дисциплина → список компетенций.
Методологически корректное распределение УК:
- УК‑1: критическое мышление
- УК‑2: проектная деятельность
- УК‑3: командная работа
- УК‑4: коммуникация
УК‑5…УК‑8 в ИВТ НЕ используются (гуманитарные/БЖД/физкультура).
"""

# ===== УК, которые реально применимы в ИВТ =====
UK1 = "УК-1"   # критическое мышление
UK2 = "УК-2"   # проектная деятельность
UK3 = "УК-3"   # командная работа
UK4 = "УК-4"   # коммуникация

# ===== ОПК =====
OPK1 = "ОПК-1"
OPK2 = "ОПК-2"
OPK3 = "ОПК-3"

# ===== Функции для удобства =====
def uk(*codes):
    return list(codes)

def uk_opk(uk_codes, *opk_codes):
    return list(uk_codes) + list(opk_codes)

def full(uk_codes, opk_codes, pk_codes):
    return list(uk_codes) + list(opk_codes) + list(pk_codes)


# ============================================================
# ПОЛНАЯ МАТРИЦА ДЛЯ ПРОФИЛЯ ИВТ
# ============================================================

IVT_DISCIPLINE_COMPETENCIES = {

    # ===== 1 семестр =====
    "Математический анализ": full([UK1], [OPK1, OPK2], ["ПК-3"]),
    "Операционные системы": full([UK1, UK2], [OPK2, OPK3], ["ПК-6", "ПК-5"]),

    # ===== 2 семестр =====
    "Дискретная математика": full([UK1], [OPK1], ["ПК-3", "ПК-4"]),
    "Базы данных": full([UK1, UK2], [OPK2, OPK3], ["ПК-8", "ПК-9"]),

    # ===== 3 семестр =====
    "Теория вероятностей и математическая статистика": full([UK1], [OPK1], ["ПК-10", "ПК-13"]),
    "Теория информации": full([UK1], [OPK1], ["ПК-3", "ПК-4"]),
    "Разработка мобильных приложений": full([UK2, UK4], [OPK2], ["ПК-16"]),
    "Компьютерная графика": full([UK1, UK2], [OPK2], ["ПК-12"]),
    "Обработка естественного языка": full([UK1, UK2], [OPK2], ["ПК-10", "ПК-11"]),
    "Технологии больших данных (Big Data)": full([UK1, UK2], [OPK2], ["ПК-13"]),
    "Проектирование информационных систем": full([UK2, UK3, UK4], [OPK3], ["ПК-20"]),
    "Разработка чат-ботов": full([UK2, UK4], [OPK2], ["ПК-10", "ПК-11"]),
    "Технологии виртуальной реальности в образовании": full([UK2], [OPK2], ["ПК-17"]),
    "Разработка приложений для виртуальной реальности в медицине": full([UK2], [OPK2], ["ПК-17"]),
    "Технологии блокчейн в логистике": full([UK1, UK2], [OPK2], ["ПК-14"]),
    "Разработка приложений для умных транспортных средств": full([UK2], [OPK2], ["ПК-18"]),

    # ===== 4 семестр =====
    "Алгоритмы и структуры данных": full([UK1, UK2], [OPK1], ["ПК-3"]),
    "Теория автоматов и формальных языков": full([UK1], [OPK1], ["ПК-4"]),
    "Веб-программирование": full([UK2, UK4], [OPK2], ["ПК-15"]),
    "Системное программирование": full([UK1, UK2], [OPK2], ["ПК-6", "ПК-5"]),
    "Робототехника": full([UK2], [OPK2], ["ПК-19"]),
    "Машинное обучение": full([UK1, UK2], [OPK2], ["ПК-10", "ПК-11"]),
    "Управление проектами в IT": full([UK2, UK3, UK4], [OPK3], []),
    "Технологии блокчейн в IT": full([UK1, UK2], [OPK2], ["ПК-14"]),
    "Разработка приложений для виртуальной реальности": full([UK2], [OPK2], ["ПК-17"]),
    "Технологии блокчейн в государственном управлении": full([UK1, UK2], [OPK2], ["ПК-14"]),
    "Разработка приложений для умных домов": full([UK2], [OPK2], ["ПК-18"]),

    # ===== 5 семестр =====
    "Языки программирования": full([UK1, UK2], [OPK2], ["ПК-1", "ПК-2"]),
    "Математическая логика": full([UK1], [OPK1], ["ПК-4"]),
    "Технологии искусственного интеллекта": full([UK1, UK2], [OPK2], ["ПК-10", "ПК-11"]),
    "Технологии виртуальной реальности": full([UK2], [OPK2], ["ПК-17"]),
    "Интернет вещей (IoT)": full([UK2], [OPK2], ["ПК-18"]),
    "Нейронные сети": full([UK1, UK2], [OPK2], ["ПК-11"]),
    "Технологии облачных вычислений": full([UK1, UK2], [OPK2], ["ПК-13"]),
    "Разработка мобильных игр": full([UK2, UK4], [OPK2], ["ПК-16", "ПК-12"]),
    "Технологии блокчейн в финансах": full([UK1, UK2], [OPK2], ["ПК-14"]),
    "Разработка приложений для умных городов": full([UK2], [OPK2], ["ПК-18"]),
    "Технологии виртуальной реальности в культуре": full([UK2], [OPK2], ["ПК-17"]),

    # ===== 6 семестр =====
    "Архитектура вычислительных систем": full([UK1, UK2], [OPK2], ["ПК-5"]),
    "Теория графов": full([UK1], [OPK1], ["ПК-3"]),
    "Распределённые вычисления": full([UK1, UK2], [OPK2], ["ПК-13", "ПК-9"]),
    "Разработка игр": full([UK2, UK4], [OPK2], ["ПК-12", "ПК-16"]),
    "Блокчейн и криптовалюты": full([UK1, UK2], [OPK2], ["ПК-14"]),
    "Системы управления базами данных": full([UK1, UK2], [OPK2, OPK3], ["ПК-8", "ПК-9"]),
    "Разработка кроссплатформенных приложений": full([UK2, UK4], [OPK2], ["ПК-16"]),
    "Технологии интернета вещей в промышленности": full([UK2], [OPK2], ["ПК-18"]),
    "Разработка приложений для интернета вещей": full([UK2], [OPK2], ["ПК-18"]),
    "Технологии виртуальной реальности в туризме": full([UK2], [OPK2], ["ПК-17"]),
    "Разработка приложений для виртуальной реальности в культуре": full([UK2], [OPK2], ["ПК-17"]),

    # ===== 7 семестр =====
    "Параллельное программирование": full([UK1, UK2], [OPK2], ["ПК-13", "ПК-3"]),
    "Компьютерное зрение": full([UK1, UK2], [OPK2], ["ПК-12"]),
    "Кибербезопасность": full([UK1, UK2], [OPK2], ["ПК-14"]),
    "Администрирование баз данных": full([UK1, UK2], [OPK2, OPK3], ["ПК-8", "ПК-9"]),
    "Технологии дополненной реальности": full([UK2], [OPK2], ["ПК-17"]),
    "Разработка приложений для умных устройств": full([UK2], [OPK2], ["ПК-18"]),
    "Технологии виртуальной реальности в медицине": full([UK2], [OPK2], ["ПК-17"]),
    "Разработка приложений для виртуальной реальности в туризме": full([UK2], [OPK2], ["ПК-17"]),
    "Технологии блокчейн в медиа": full([UK1, UK2], [OPK2], ["ПК-14"]),

    # ===== Практики и ГИА =====
    "Учебная практика": [UK2, UK3, UK4],
    "Преддипломная практика": [UK2, UK3, UK4],
    "ВКР": [UK2, UK3, UK4],
}


# ============================================================
# ОБЩАЯ МАТРИЦА
# ============================================================

COMPETENCY_MATRIX = {
    "ИВТ": IVT_DISCIPLINE_COMPETENCIES
}


# ============================================================
# ФУНКЦИЯ ОПРЕДЕЛЕНИЯ КОМПЕТЕНЦИЙ
# ============================================================

def detect_competencies(profile: str, discipline_name: str) -> list:
    profile_matrix = COMPETENCY_MATRIX.get(profile)
    if not profile_matrix:
        return []

    comps = profile_matrix.get(discipline_name)
    if not comps:
        return []

    return list(comps)
